import{B as g,E as m,k as i,kc as h,m as a,ob as n,pb as c,s as l}from"./chunk-YXSU4V5K.js";var u=class s{constructor(t){this.http=t}apiUrl=h.apiUrl;getLocalStorage(){return typeof window<"u"&&window.localStorage?window.localStorage:null}register(t){return this.http.post(`${this.apiUrl}/users/register`,t)}login(t){return this.http.post(`${this.apiUrl}/users/login`,t).pipe(a(e=>{let r=this.getLocalStorage();return r&&(r.setItem("token",e.token),r.setItem("username",e.username),r.setItem("role",e.role)),e}),l(e=>(console.error("Error al iniciar sesi\xF3n:",e),i(()=>new Error("Error al iniciar sesi\xF3n.")))))}getUserProfile(){let t=this.getLocalStorage(),e=t?t.getItem("token"):"",r=new n().set("Authorization",`Bearer ${e}`);return this.http.get(`${this.apiUrl}/users/profile`,{headers:r})}updateProfile(t){let e=this.getLocalStorage(),r=e?e.getItem("token"):"",o=new n().set("Authorization",`Bearer ${r}`);return this.http.put(`${this.apiUrl}/users/profile`,t,{headers:o})}getRole(){let t=this.getLocalStorage();return t?t.getItem("role"):null}getUsername(){let t=this.getLocalStorage();return t?t.getItem("username"):null}logout(){let t=this.getLocalStorage();t&&(t.removeItem("token"),t.removeItem("username"),t.removeItem("role"))}isLoggedIn(){let t=this.getLocalStorage();return!!(t?t.getItem("token"):null)}getUserHistory(t){let e=this.getLocalStorage(),r=e?e.getItem("token"):"",o=new n().set("Authorization",`Bearer ${r}`);return this.http.get(`${this.apiUrl}/users/${t}/history`,{headers:o})}getUserAchievements(t){let e=this.getLocalStorage(),r=e?e.getItem("token"):"",o=new n().set("Authorization",`Bearer ${r}`);return this.http.get(`${this.apiUrl}/users/${t}/achievements`,{headers:o})}getTournamentRanking(t){return this.http.get(`${this.apiUrl}/tournaments/${t}/ranking`)}static \u0275fac=function(e){return new(e||s)(m(c))};static \u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"})};export{u as a};
