import{a as B}from"./chunk-HHZQRIOC.js";import{a as Z,b as _,c as $}from"./chunk-SG2V5MYH.js";import{$ as m,Ac as z,Bc as J,C as c,Dc as K,Ec as Q,Fa as L,Ga as x,Gc as S,Ic as W,Lc as X,Oa as n,Oc as F,Pa as y,Pc as Y,Qc as I,da as d,ha as N,hc as q,ia as f,jb as R,jc as v,kc as G,la as g,lc as E,mb as M,nc as k,oa as l,oc as A,qb as j,rc as D,tc as P,ub as T,uc as U,vc as V,wc as O,xa as r,xb as w,ya as i,yc as C,za as b,zc as H}from"./chunk-LARWJHAD.js";function oe(e,a){e&1&&(r(0,"mat-error"),n(1," El usuario es obligatorio. "),i())}function re(e,a){e&1&&(r(0,"mat-error"),n(1," La contrase\xF1a es obligatoria. "),i())}function ie(e,a){if(e&1&&(r(0,"div",13)(1,"mat-icon",14),n(2,"error"),i(),r(3,"span"),n(4),i()()),e&2){let o=x();m(4),y(o.errorMessage)}}function ne(e,a){if(e&1&&(r(0,"div",15)(1,"mat-icon",16),n(2,"check_circle"),i(),r(3,"span"),n(4),i()()),e&2){let o=x();m(4),y(o.successMessage)}}var p=class e{constructor(a,o,t,s){this.fb=a;this.userService=o;this.authService=t;this.router=s;this.loginForm=this.fb.group({username:["",E.required],password:["",E.required]})}loginForm;successMessage=null;errorMessage="";onSubmit(){if(this.loginForm.valid){let{username:a,password:o}=this.loginForm.value;this.userService.login({username:a,password:o}).subscribe({next:t=>{console.log("Respuesta del backend:",t),localStorage.setItem("authToken",t.token),localStorage.setItem("username",t.username),localStorage.setItem("role",t.role),this.router.navigate(["/profile"])},error:t=>{console.error("Error al iniciar sesi\xF3n:",t),alert("Credenciales incorrectas.")}})}}static \u0275fac=function(o){return new(o||e)(d(O),d(B),d($),d(T))};static \u0275cmp=N({type:e,selectors:[["app-login"]],decls:24,vars:6,consts:[[1,"login-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["for","username"],["appearance","fill",1,"full-width"],["matInput","","id","username","type","text","formControlName","username","required",""],[4,"ngIf"],["for","password"],["matInput","","id","password","type","password","formControlName","password","required",""],["class","error-message",4,"ngIf"],["class","success-message",4,"ngIf"],[1,"event-actions-nav"],["mat-stroked-button","","color","primary","type","submit",3,"disabled"],[1,"error-message"],["color","warn"],[1,"success-message"],["color","primary"]],template:function(o,t){if(o&1&&(r(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),n(4,"Iniciar Sesi\xF3n"),i()(),r(5,"mat-card-content")(6,"form",1),L("ngSubmit",function(){return t.onSubmit()}),r(7,"div",2)(8,"label",3),n(9,"Usuario"),i(),r(10,"mat-form-field",4),b(11,"input",5),g(12,oe,2,0,"mat-error",6),i()(),r(13,"div",2)(14,"label",7),n(15,"Contrase\xF1a"),i(),r(16,"mat-form-field",4),b(17,"input",8),g(18,re,2,0,"mat-error",6),i()(),g(19,ie,5,1,"div",9)(20,ne,5,1,"div",10),r(21,"mat-card-actions",11)(22,"button",12),n(23,"Login"),i()()()()()()),o&2){let s,u;m(6),l("formGroup",t.loginForm),m(6),l("ngIf",((s=t.loginForm.get("username"))==null?null:s.hasError("required"))&&((s=t.loginForm.get("username"))==null?null:s.touched)),m(6),l("ngIf",((u=t.loginForm.get("password"))==null?null:u.hasError("required"))&&((u=t.loginForm.get("password"))==null?null:u.touched)),m(),l("ngIf",t.errorMessage),m(),l("ngIf",t.successMessage),m(2),l("disabled",t.loginForm.invalid)}},dependencies:[M,R,C,D,G,k,A,V,P,U,S,H,K,J,Q,z,v,q,I,Y,X,W,F,_,Z],styles:[".form-field[_ngcontent-%COMP%]{margin-bottom:1.2rem}.login-form[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;width:100%}.full-width[_ngcontent-%COMP%]{width:100%}"]})};var ae=[{path:"",component:p}],h=class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=f({type:e});static \u0275inj=c({imports:[w.forChild(ae),w]})};var te=class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=f({type:e});static \u0275inj=c({providers:[j()],imports:[p,M,h,C,S,v,I,F,_]})};export{te as LoginModule};
