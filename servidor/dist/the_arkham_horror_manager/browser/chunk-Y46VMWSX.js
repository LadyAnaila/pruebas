import"./chunk-SGYCFQGT.js";import{a as Re}from"./chunk-UZLBYMZW.js";import{a as It,b as kt}from"./chunk-2WW4ZDK7.js";import{a as Me,b as Et,d as Ot,e as we,f as At,h as Te,i as Se}from"./chunk-JZA7SENL.js";import{e as Pt,g as Dt}from"./chunk-QQUIUFGX.js";import{$ as s,$a as he,Ac as G,B as H,Bc as Y,C as w,Cc as ve,D as J,Da as M,E as le,Ec as xe,F as v,Fa as h,Fb as Le,G as Xe,Ga as m,Gc as ye,H as Qe,Hb as lt,Hc as X,Ic as Mt,K as u,Ka as Ee,L as f,La as Oe,M as j,Ma as Ae,Mc as Ce,N as We,Na as at,Oa as l,P as Ze,Pa as _,Pc as wt,Qa as b,Qb as dt,Qc as Tt,R as de,Rb as ct,Rc as St,S as Ke,Sa as ee,Sb as pt,Ta as te,U as ce,Ua as ie,W as Je,Wa as me,Wb as mt,Xa as ne,Xb as ht,Y as De,Zb as oe,_ as R,_b as ze,a as P,b as se,bb as ge,cb as ae,da as x,fa as et,fb as ot,fc as be,g as K,ha as C,hb as ue,hc as $,i as Ye,ia as T,ib as U,ja as pe,jb as O,jc as L,kc as gt,la as g,lc as ut,mb as k,na as F,oa as p,oc as ft,pb as A,pc as _t,qa as B,qc as bt,rc as vt,sb as q,sc as xt,ta as N,ua as tt,ub as fe,va as it,vb as _e,wa as nt,wc as yt,xa as o,xb as D,y as E,ya as r,yb as rt,yc as Ct,za as y,zb as st}from"./chunk-YXSU4V5K.js";var Lt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=T({type:n});static \u0275inj=w({})}return n})();var zt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=T({type:n});static \u0275inj=w({imports:[oe,Lt,Ot]})}return n})();var Kt=["tooltip"],Fe=20;var Ne=new J("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let n=v(we);return()=>n.scrollStrategies.reposition({scrollThrottle:Fe})}});function Nt(n){return()=>n.scrollStrategies.reposition({scrollThrottle:Fe})}var Vt={provide:Ne,deps:[we],useFactory:Nt};function Ht(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var jt=new J("mat-tooltip-default-options",{providedIn:"root",factory:Ht});var Rt="tooltip-panel",Ft=st({passive:!0}),Jt=8,ei=8,ti=24,ii=200,Ve=(()=>{class n{_elementRef=v(ce);_ngZone=v(Ke);_platform=v(rt);_ariaDescriber=v(mt);_focusMonitor=v(lt);_dir=v(ht);_injector=v(Ze);_viewContainerRef=v(et);_defaultOptions=v(jt,{optional:!0});_overlayRef;_tooltipInstance;_portal;_position="below";_positionAtOrigin=!1;_disabled=!1;_tooltipClass;_viewInitialized=!1;_pointerExitEventsInitialized=!1;_tooltipComponent=Bt;_viewportMargin=8;_currentPosition;_cssClassPrefix="mat-mdc";_ariaDescriptionPending;_dirSubscribed=!1;get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=ze(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){let t=ze(e);this._disabled!==t&&(this._disabled=t,t?this.hide(0):this._setupPointerEnterEventsIfNeeded(),this._syncAriaDescription(this.message))}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Le(e)}_showDelay;get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Le(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}_hideDelay;touchGestures="auto";get message(){return this._message}set message(e){let t=this._message;this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage()),this._syncAriaDescription(t)}_message="";get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}_passiveListeners=[];_touchstartTimeout=null;_destroyed=new K;_isDestroyed=!1;constructor(){let e=this._defaultOptions;e&&(this._showDelay=e.showDelay,this._hideDelay=e.hideDelay,e.position&&(this.position=e.position),e.positionAtOrigin&&(this.positionAtOrigin=e.positionAtOrigin),e.touchGestures&&(this.touchGestures=e.touchGestures),e.tooltipClass&&(this.tooltipClass=e.tooltipClass)),this._viewportMargin=Jt}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(E(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([t,i])=>{e.removeEventListener(t,i,Ft)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._isDestroyed=!0,this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,t){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let i=this._createOverlay(t);this._detach(),this._portal=this._portal||new Et(this._tooltipComponent,this._viewContainerRef);let d=this._tooltipInstance=i.attach(this._portal).instance;d._triggerElement=this._elementRef.nativeElement,d._mouseLeaveHideDelay=this._hideDelay,d.afterHidden().pipe(E(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),d.show(e)}hide(e=this.hideDelay){let t=this._tooltipInstance;t&&(t.isVisible()?t.hide(e):(t._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let c=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&c._origin instanceof ce)return this._overlayRef;this._detach()}let t=this._injector.get(Pt).getAncestorScrollContainers(this._elementRef),i=this._injector.get(we),d=i.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(t);return d.positionChanges.pipe(E(this._destroyed)).subscribe(c=>{this._updateCurrentPositionClass(c.connectionPair),this._tooltipInstance&&c.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=i.create({direction:this._dir,positionStrategy:d,panelClass:`${this._cssClassPrefix}-${Rt}`,scrollStrategy:this._injector.get(Ne)()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(E(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(E(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(E(this._destroyed)).subscribe(c=>{this._isTooltipVisible()&&c.keyCode===27&&!pt(c)&&(c.preventDefault(),c.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._dirSubscribed||(this._dirSubscribed=!0,this._dir.change.pipe(E(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let t=e.getConfig().positionStrategy,i=this._getOrigin(),d=this._getOverlayPosition();t.withPositions([this._addOffset(P(P({},i.main),d.main)),this._addOffset(P(P({},i.fallback),d.fallback))])}_addOffset(e){let t=ei,i=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-t:e.originY==="bottom"?e.offsetY=t:e.originX==="start"?e.offsetX=i?-t:t:e.originX==="end"&&(e.offsetX=i?t:-t),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",t=this.position,i;t=="above"||t=="below"?i={originX:"center",originY:t=="above"?"top":"bottom"}:t=="before"||t=="left"&&e||t=="right"&&!e?i={originX:"start",originY:"center"}:(t=="after"||t=="right"&&e||t=="left"&&!e)&&(i={originX:"end",originY:"center"});let{x:d,y:c}=this._invertPosition(i.originX,i.originY);return{main:i,fallback:{originX:d,originY:c}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",t=this.position,i;t=="above"?i={overlayX:"center",overlayY:"bottom"}:t=="below"?i={overlayX:"center",overlayY:"top"}:t=="before"||t=="left"&&e||t=="right"&&!e?i={overlayX:"end",overlayY:"center"}:(t=="after"||t=="right"&&e||t=="left"&&!e)&&(i={overlayX:"start",overlayY:"center"});let{x:d,y:c}=this._invertPosition(i.overlayX,i.overlayY);return{main:i,fallback:{overlayX:d,overlayY:c}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),De(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()},{injector:this._injector}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,t){return this.position==="above"||this.position==="below"?t==="top"?t="bottom":t==="bottom"&&(t="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:t}}_updateCurrentPositionClass(e){let{overlayY:t,originX:i,originY:d}=e,c;if(t==="center"?this._dir&&this._dir.value==="rtl"?c=i==="end"?"left":"right":c=i==="start"?"left":"right":c=t==="bottom"&&d==="top"?"above":"below",c!==this._currentPosition){let S=this._overlayRef;if(S){let Ge=`${this._cssClassPrefix}-${Rt}-`;S.removePanelClass(Ge+this._currentPosition),S.addPanelClass(Ge+c)}this._currentPosition=c}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let t;e.x!==void 0&&e.y!==void 0&&(t=e),this.show(void 0,t)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let t=e.targetTouches?.[0],i=t?{x:t.clientX,y:t.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),this._touchstartTimeout&&clearTimeout(this._touchstartTimeout);let d=500;this._touchstartTimeout=setTimeout(()=>{this._touchstartTimeout=null,this.show(void 0,i)},this._defaultOptions?.touchLongPressShowDelay??d)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",t=>{let i=t.relatedTarget;(!i||!this._overlayRef?.overlayElement.contains(i))&&this.hide()}],["wheel",t=>this._wheelListener(t)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let t=()=>{this._touchstartTimeout&&clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions?.touchendHideDelay)};e.push(["touchend",t],["touchcancel",t])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([t,i])=>{this._elementRef.nativeElement.addEventListener(t,i,Ft)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let t=this._injector.get(ot).elementFromPoint(e.clientX,e.clientY),i=this._elementRef.nativeElement;t!==i&&!i.contains(t)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let t=this._elementRef.nativeElement,i=t.style;(e==="on"||t.nodeName!=="INPUT"&&t.nodeName!=="TEXTAREA")&&(i.userSelect=i.msUserSelect=i.webkitUserSelect=i.MozUserSelect="none"),(e==="on"||!t.draggable)&&(i.webkitUserDrag="none"),i.touchAction="none",i.webkitTapHighlightColor="transparent"}}_syncAriaDescription(e){this._ariaDescriptionPending||(this._ariaDescriptionPending=!0,this._ariaDescriber.removeDescription(this._elementRef.nativeElement,e,"tooltip"),this._isDestroyed||De({write:()=>{this._ariaDescriptionPending=!1,this.message&&!this.disabled&&this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")}},{injector:this._injector}))}static \u0275fac=function(t){return new(t||n)};static \u0275dir=pe({type:n,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(t,i){t&2&&B("mat-mdc-tooltip-disabled",i.disabled)},inputs:{position:[0,"matTooltipPosition","position"],positionAtOrigin:[0,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[0,"matTooltipDisabled","disabled"],showDelay:[0,"matTooltipShowDelay","showDelay"],hideDelay:[0,"matTooltipHideDelay","hideDelay"],touchGestures:[0,"matTooltipTouchGestures","touchGestures"],message:[0,"matTooltip","message"],tooltipClass:[0,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"]})}return n})(),Bt=(()=>{class n{_changeDetectorRef=v(he);_elementRef=v(ce);_isMultiline=!1;message;tooltipClass;_showTimeoutId;_hideTimeoutId;_triggerElement;_mouseLeaveHideDelay;_animationsDisabled;_tooltip;_closeOnInteraction=!1;_isVisible=!1;_onHide=new K;_showAnimation="mat-mdc-tooltip-show";_hideAnimation="mat-mdc-tooltip-hide";constructor(){let e=v(Je,{optional:!0});this._animationsDisabled=e==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>ti&&e.width>=ii}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let t=this._tooltip.nativeElement,i=this._showAnimation,d=this._hideAnimation;if(t.classList.remove(e?d:i),t.classList.add(e?i:d),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let c=getComputedStyle(t);(c.getPropertyValue("animation-duration")==="0s"||c.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(t.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["mat-tooltip-component"]],viewQuery:function(t,i){if(t&1&&Ee(Kt,7),t&2){let d;Oe(d=Ae())&&(i._tooltip=d.first)}},hostAttrs:["aria-hidden","true"],hostBindings:function(t,i){t&1&&h("mouseleave",function(c){return i._handleMouseLeave(c)})},decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mat-mdc-tooltip-surface","mdc-tooltip__surface"]],template:function(t,i){if(t&1){let d=M();o(0,"div",1,0),h("animationend",function(S){return u(d),f(i._handleAnimationEnd(S))}),o(2,"div",2),l(3),r()()}t&2&&(B("mdc-tooltip--multiline",i._isMultiline),p("ngClass",i.tooltipClass),s(3),_(i.message))},dependencies:[ue],styles:[`.mat-mdc-tooltip{position:relative;transform:scale(0);display:inline-flex}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-surface{word-break:normal;overflow-wrap:anywhere;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center;will-change:transform,opacity;background-color:var(--mdc-plain-tooltip-container-color, var(--mat-sys-inverse-surface));color:var(--mdc-plain-tooltip-supporting-text-color, var(--mat-sys-inverse-on-surface));border-radius:var(--mdc-plain-tooltip-container-shape, var(--mat-sys-corner-extra-small));font-family:var(--mdc-plain-tooltip-supporting-text-font, var(--mat-sys-body-small-font));font-size:var(--mdc-plain-tooltip-supporting-text-size, var(--mat-sys-body-small-size));font-weight:var(--mdc-plain-tooltip-supporting-text-weight, var(--mat-sys-body-small-weight));line-height:var(--mdc-plain-tooltip-supporting-text-line-height, var(--mat-sys-body-small-line-height));letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, var(--mat-sys-body-small-tracking))}.mat-mdc-tooltip-surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}.mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mat-mdc-tooltip-surface{text-align:right}.mat-mdc-tooltip-panel{line-height:normal}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}
`],encapsulation:2,changeDetection:0})}return n})(),re=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=T({type:n});static \u0275inj=w({providers:[Vt],imports:[dt,At,oe,oe,Dt]})}return n})();function ni(n,a){if(n&1&&(o(0,"mat-option",17),l(1),r()),n&2){let e=a.$implicit;p("value",e),s(),b(" ",e," ")}}function ai(n,a){if(n&1){let e=M();o(0,"mat-form-field",14)(1,"mat-select",16,0),h("selectionChange",function(i){u(e);let d=m(2);return f(d._changePageSize(i.value))}),it(3,ni,2,2,"mat-option",17,tt),r(),o(5,"div",18),h("click",function(){u(e);let i=at(2);return f(i.open())}),r()()}if(n&2){let e=m(2);p("appearance",e._formFieldAppearance)("color",e.color),s(),p("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),s(2),nt(e._displayedPageSizeOptions)}}function oi(n,a){if(n&1&&(o(0,"div",15),l(1),r()),n&2){let e=m(2);s(),_(e.pageSize)}}function ri(n,a){if(n&1&&(o(0,"div",3)(1,"div",13),l(2),r(),g(3,ai,6,7,"mat-form-field",14)(4,oi,2,1,"div",15),r()),n&2){let e=m();s(),F("id",e._pageSizeLabelId),s(),b(" ",e._intl.itemsPerPageLabel," "),s(),N(e._displayedPageSizeOptions.length>1?3:-1),s(),N(e._displayedPageSizeOptions.length<=1?4:-1)}}function si(n,a){if(n&1){let e=M();o(0,"button",19),h("click",function(){u(e);let i=m();return f(i._buttonClicked(0,i._previousButtonsDisabled()))}),j(),o(1,"svg",8),y(2,"path",20),r()()}if(n&2){let e=m();p("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("disabled",e._previousButtonsDisabled())("tabindex",e._previousButtonsDisabled()?-1:null),F("aria-label",e._intl.firstPageLabel)}}function li(n,a){if(n&1){let e=M();o(0,"button",21),h("click",function(){u(e);let i=m();return f(i._buttonClicked(i.getNumberOfPages()-1,i._nextButtonsDisabled()))}),j(),o(1,"svg",8),y(2,"path",22),r()()}if(n&2){let e=m();p("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("disabled",e._nextButtonsDisabled())("tabindex",e._nextButtonsDisabled()?-1:null),F("aria-label",e._intl.lastPageLabel)}}var Ie=(()=>{class n{changes=new K;itemsPerPageLabel="Items per page:";nextPageLabel="Next page";previousPageLabel="Previous page";firstPageLabel="First page";lastPageLabel="Last page";getRangeLabel=(e,t,i)=>{if(i==0||t==0)return`0 of ${i}`;i=Math.max(i,0);let d=e*t,c=d<i?Math.min(d+t,i):d+t;return`${d+1} \u2013 ${c} of ${i}`};static \u0275fac=function(t){return new(t||n)};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function di(n){return n||new Ie}var ci={provide:Ie,deps:[[new Xe,new Qe,Ie]],useFactory:di},pi=50;var mi=new J("MAT_PAGINATOR_DEFAULT_OPTIONS"),He=(()=>{class n{_intl=v(Ie);_changeDetectorRef=v(he);_formFieldAppearance;_pageSizeLabelId=v(ct).getId("mat-paginator-page-size-label-");_intlChanges;_isInitialized=!1;_initializedStream=new Ye(1);color;get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}_pageIndex=0;get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}_length=0;get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}_pageSize;get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(t=>ae(t,0)),this._updateDisplayedPageSizeOptions()}_pageSizeOptions=[];hidePageSize=!1;showFirstLastButtons=!1;selectConfig={};disabled=!1;page=new de;_displayedPageSizeOptions;initialized=this._initializedStream;constructor(){let e=this._intl,t=v(mi,{optional:!0});if(this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),t){let{pageSize:i,pageSizeOptions:d,hidePageSize:c,showFirstLastButtons:S}=t;i!=null&&(this._pageSize=i),d!=null&&(this._pageSizeOptions=d),c!=null&&(this.hidePageSize=c),S!=null&&(this.showFirstLastButtons=S)}this._formFieldAppearance=t?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){this.hasNextPage()&&this._navigate(this.pageIndex+1)}previousPage(){this.hasPreviousPage()&&this._navigate(this.pageIndex-1)}firstPage(){this.hasPreviousPage()&&this._navigate(0)}lastPage(){this.hasNextPage()&&this._navigate(this.getNumberOfPages()-1)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let t=this.pageIndex*this.pageSize,i=this.pageIndex;this.pageIndex=Math.floor(t/e)||0,this.pageSize=e,this._emitPageEvent(i)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:pi),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,t)=>e-t),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}_navigate(e){let t=this.pageIndex;e!==t&&(this.pageIndex=e,this._emitPageEvent(t))}_buttonClicked(e,t){t||this._navigate(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[2,"pageIndex","pageIndex",ae],length:[2,"length","length",ae],pageSize:[2,"pageSize","pageSize",ae],pageSizeOptions:"pageSizeOptions",hidePageSize:[2,"hidePageSize","hidePageSize",ge],showFirstLastButtons:[2,"showFirstLastButtons","showFirstLastButtons",ge],selectConfig:"selectConfig",disabled:[2,"disabled","disabled",ge]},outputs:{page:"page"},exportAs:["matPaginator"],decls:14,vars:14,consts:[["selectRef",""],[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","disabled","tabindex"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],[1,"mat-mdc-paginator-touch-target",3,"click"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button","matTooltipPosition","above","disabledInteractive","",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","disabled","tabindex"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(t,i){t&1&&(o(0,"div",1)(1,"div",2),g(2,ri,5,4,"div",3),o(3,"div",4)(4,"div",5),l(5),r(),g(6,si,3,5,"button",6),o(7,"button",7),h("click",function(){return i._buttonClicked(i.pageIndex-1,i._previousButtonsDisabled())}),j(),o(8,"svg",8),y(9,"path",9),r()(),We(),o(10,"button",10),h("click",function(){return i._buttonClicked(i.pageIndex+1,i._nextButtonsDisabled())}),j(),o(11,"svg",8),y(12,"path",11),r()(),g(13,li,3,5,"button",12),r()()()),t&2&&(s(2),N(i.hidePageSize?-1:2),s(3),b(" ",i._intl.getRangeLabel(i.pageIndex,i.pageSize,i.length)," "),s(),N(i.showFirstLastButtons?6:-1),s(),p("matTooltip",i._intl.previousPageLabel)("matTooltipDisabled",i._previousButtonsDisabled())("disabled",i._previousButtonsDisabled())("tabindex",i._previousButtonsDisabled()?-1:null),F("aria-label",i._intl.previousPageLabel),s(3),p("matTooltip",i._intl.nextPageLabel)("matTooltipDisabled",i._nextButtonsDisabled())("disabled",i._nextButtonsDisabled())("tabindex",i._nextButtonsDisabled()?-1:null),F("aria-label",i._intl.nextPageLabel),s(3),N(i.showFirstLastButtons?13:-1))},dependencies:[Ce,Te,Me,be,Ve],styles:[`.mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color, var(--mat-sys-on-surface));background-color:var(--mat-paginator-container-background-color, var(--mat-sys-surface));font-family:var(--mat-paginator-container-text-font, var(--mat-sys-body-small-font));line-height:var(--mat-paginator-container-text-line-height, var(--mat-sys-body-small-line-height));font-size:var(--mat-paginator-container-text-size, var(--mat-sys-body-small-size));font-weight:var(--mat-paginator-container-text-weight, var(--mat-sys-body-small-weight));letter-spacing:var(--mat-paginator-container-text-tracking, var(--mat-sys-body-small-tracking));--mat-form-field-container-height:var(--mat-paginator-form-field-container-height, 40px);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding, 8px)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size, var(--mat-sys-body-small-size))}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size, 56px)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}@media(forced-colors: active){.mat-mdc-icon-button[aria-disabled] .mat-mdc-paginator-icon,.mat-mdc-paginator-icon{fill:currentColor}.mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}.mat-mdc-paginator-range-actions .mat-mdc-icon-button[aria-disabled]{color:GrayText}}.mat-mdc-paginator-touch-target{display:var(--mat-paginator-touch-target-display, block);position:absolute;top:50%;left:50%;width:84px;height:48px;background-color:rgba(0,0,0,0);transform:translate(-50%, -50%);cursor:pointer}
`],encapsulation:2,changeDetection:0})}return n})(),Ut=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=T({type:n});static \u0275inj=w({providers:[ci],imports:[L,Se,re,He]})}return n})();var Q=class n{constructor(a){this.http=a}apiUrl="https://arkhamdb.com/api/public";getAllCards(){return this.http.get(`${this.apiUrl}/cards/`)}getCardByCode(a){return this.http.get(`${this.apiUrl}/card/${a}`)}getCardFaq(a){return this.http.get(`${this.apiUrl}/faq/${a}.json`)}getFilteredCards(a){let e={};return a.type_code&&(e.type_code=a.type_code),a.faction_code&&(e.faction_code=a.faction_code),a.name&&(e.name=a.name),this.http.get(`${this.apiUrl}/cards/`,{params:e})}static \u0275fac=function(e){return new(e||n)(le(A))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var z=class n{constructor(a){this.http=a}apiUrl=gt.apiUrl+"/decks";getUserDecks(a){return this.http.get(this.apiUrl,{headers:{Authorization:`Bearer ${a}`}})}saveDeck(a,e,t){return this.http.post(this.apiUrl,{name:a,cards:e},{headers:{Authorization:`Bearer ${t}`}})}getDeck(a,e){return this.http.get(`${this.apiUrl}/${a}`,{headers:{Authorization:`Bearer ${e}`}})}getDeckCards(a,e){return this.http.get(`${this.apiUrl}/${a}/cards`,{headers:{Authorization:`Bearer ${e}`}})}updateDeck(a,e,t,i){return this.http.put(`${this.apiUrl}/${a}`,{name:e,cards:t},{headers:{Authorization:`Bearer ${i}`}})}deleteDeck(a,e){return this.http.delete(`${this.apiUrl}/${a}`,{headers:{Authorization:`Bearer ${e}`}})}static \u0275fac=function(e){return new(e||n)(le(A))};static \u0275prov=H({token:n,factory:n.\u0275fac,providedIn:"root"})};var gi=()=>[10,20,50],Yt=n=>({investigator:n});function ui(n,a){if(n&1){let e=M();o(0,"div",23)(1,"span"),l(2),r(),o(3,"button",24),h("click",function(){let i=u(e).$implicit,d=m(2);return f(d.decrementCard(i))}),l(4,"\u2212"),r(),o(5,"span",25),l(6),r(),o(7,"button",24),h("click",function(){let i=u(e).$implicit,d=m(2);return f(d.incrementCard(i))}),l(8,"+"),r()()}if(n&2){let e=a.$implicit,t=m(2);s(2),_(t.getCardName(e.card_code)),s(4),_(e.quantity)}}function fi(n,a){if(n&1&&(o(0,"div",21)(1,"h3"),l(2,"Cartas en el mazo"),r(),g(3,ui,9,2,"div",22),r()),n&2){let e=m();s(3),p("ngForOf",e.selectedCards)}}function _i(n,a){if(n&1&&(o(0,"mat-option",26),l(1),r()),n&2){let e=a.$implicit;p("value",e.code),s(),b(" ",e.name," ")}}function bi(n,a){if(n&1&&(o(0,"mat-option",26),l(1),r()),n&2){let e=a.$implicit;p("value",e.code),s(),b(" ",e.name," ")}}function vi(n,a){if(n&1&&(o(0,"span",34),l(1),r()),n&2){let e=m().$implicit,t=m(2);s(),b(" \xD7",t.getCardQuantity(e.code)," ")}}function xi(n,a){if(n&1){let e=M();o(0,"mat-card",29),y(1,"img",30),o(2,"mat-card-title"),l(3),r(),o(4,"mat-card-content")(5,"div"),l(6),r(),o(7,"div"),l(8),r(),o(9,"div",31)(10,"strong"),l(11,"Descripci\xF3n:"),r(),o(12,"div"),l(13),r()()(),o(14,"mat-card-actions")(15,"button",32),h("click",function(){let i=u(e).$implicit,d=m(2);return f(d.addToDeck(i))}),l(16," A\xF1adir "),r(),g(17,vi,2,1,"span",33),r()()}if(n&2){let e=a.$implicit,t=m(2);p("ngClass",ne(8,Yt,e.type_code==="investigator")),s(),p("src","https://arkhamdb.com/bundles/cards/"+e.code+".png",R)("alt",e.name),s(2),_(e.name),s(3),b("Tipo: ",e.type_code,""),s(2),b("Facci\xF3n: ",e.faction_code,""),s(5),_(e.text||"Sin descripci\xF3n."),s(4),p("ngIf",t.isSelected(e))}}function yi(n,a){if(n&1&&(o(0,"div",27),g(1,xi,18,10,"mat-card",28),r()),n&2){let e=m();s(),p("ngForOf",e.pagedCards)}}function Ci(n,a){if(n&1&&(o(0,"div",31)(1,"strong"),l(2,"Descripci\xF3n:"),r(),o(3,"div"),l(4),r()()),n&2){let e=m().$implicit;s(4),_(e.text||"Sin descripci\xF3n.")}}function Mi(n,a){if(n&1&&(o(0,"span",34),l(1),r()),n&2){let e=m().$implicit,t=m(2);s(),b(" \xD7",t.getCardQuantity(e.code)," ")}}function wi(n,a){if(n&1){let e=M();o(0,"tr",37)(1,"td"),y(2,"img",38),l(3),o(4,"button",39),h("click",function(){let i=u(e).$implicit,d=m(2);return f(d.expandedRows[i.code]=!d.expandedRows[i.code])}),o(5,"mat-icon"),l(6),r()(),g(7,Ci,5,1,"div",40),r(),o(8,"td"),l(9),r(),o(10,"td"),l(11),r(),o(12,"td")(13,"button",32),h("click",function(){let i=u(e).$implicit,d=m(2);return f(d.addToDeck(i))}),l(14," A\xF1adir "),r(),g(15,Mi,2,1,"span",33),r()()}if(n&2){let e=a.$implicit,t=m(2);p("ngClass",ne(9,Yt,e.type_code==="investigator")),s(2),p("src","https://arkhamdb.com/bundles/cards/"+e.code+".png",R)("alt",e.name),s(),b(" ",e.name," "),s(3),_(t.expandedRows[e.code]?"expand_less":"expand_more"),s(),p("ngIf",t.expandedRows[e.code]),s(2),_(e.type_code),s(2),_(e.faction_code),s(4),p("ngIf",t.isSelected(e))}}function Ti(n,a){if(n&1&&(o(0,"table",35)(1,"tr")(2,"th"),l(3,"Nombre"),r(),o(4,"th"),l(5,"Tipo"),r(),o(6,"th"),l(7,"Facci\xF3n"),r(),o(8,"th"),l(9,"Acciones"),r()(),g(10,wi,16,11,"tr",36),r()),n&2){let e=m();s(10),p("ngForOf",e.pagedCards)}}var V=class n{constructor(a,e,t,i,d){this.cardService=a;this.deckService=e;this.route=t;this.http=i;this.router=d}cards=[];allCards=[];pagedCards=[];pageSize=10;pageIndex=0;selectionMode=!1;cardSelected=new de;selectedCards=[];deckName="";filters={type_code:"",faction_code:"",name:""};cardTypes=[];factions=[];viewMode="cards";expandedRows={};ngOnInit(){let a=this.route.snapshot.data.selectionMode;a!==void 0&&(this.selectionMode=a),this.http.get("https://arkhamdb.com/api/public/factions/").subscribe(e=>{this.factions=e.map(t=>({code:t.code,name:t.name}))}),this.cardService.getAllCards().subscribe(e=>{this.allCards=e,this.cards=e,this.updatePagedCards();let t=new Set(e.map(i=>i.type_code));this.cardTypes=Array.from(t).map(i=>({code:i,name:i.charAt(0).toUpperCase()+i.slice(1)}))}),this.route.queryParamMap.subscribe(e=>{let t=e.get("deckId");if(t){let i=typeof window<"u"?localStorage.getItem("token"):"";this.deckService.getDeck(Number(t),i).subscribe(d=>{this.deckName=d.name,this.deckService.getDeckCards(Number(t),i).subscribe(c=>{this.selectedCards=c.map(S=>({card_code:S.card_code,quantity:S.quantity}))})})}})}setViewMode(a){this.viewMode=a}applyFilters(){this.cards=this.allCards.filter(a=>{let e=!this.filters.type_code||a.type_code===this.filters.type_code,t=!this.filters.faction_code||a.faction_code===this.filters.faction_code,i=!this.filters.name||a.name.toLowerCase().includes(this.filters.name.toLowerCase());return e&&t&&i}),this.pageIndex=0,this.updatePagedCards()}clearFilters(){this.filters={type_code:"",faction_code:"",name:""},this.applyFilters()}onPageChange(a){this.pageIndex=a.pageIndex,this.pageSize=a.pageSize,this.updatePagedCards()}updatePagedCards(){let a=this.pageIndex*this.pageSize,e=a+this.pageSize;this.pagedCards=this.cards.slice(a,e)}addToDeck(a){let e=this.selectedCards.find(t=>t.card_code===a.code);e?e.quantity+=1:this.selectedCards.push({card_code:a.code,quantity:1}),this.cardSelected.emit(a)}incrementCard(a){a.quantity+=1}decrementCard(a){a.quantity>1?a.quantity-=1:this.selectedCards=this.selectedCards.filter(e=>e.card_code!==a.card_code)}isSelected(a){return this.selectedCards.some(e=>e.card_code===a.code)}getCardQuantity(a){let e=this.selectedCards.find(t=>t.card_code===a);return e?e.quantity:0}saveDeck(){let a=localStorage.getItem("token");if(!this.deckName||this.selectedCards.length===0||!a){alert("Debes poner nombre y a\xF1adir cartas al mazo.");return}this.deckService.saveDeck(this.deckName,this.selectedCards,a).subscribe({next:e=>{alert("\xA1Mazo guardado con \xE9xito!"),e.deck_id&&this.router.navigate(["/cards/decks",e.deck_id]),this.deckName="",this.selectedCards=[]},error:e=>alert("Error al guardar el mazo")})}getCardName(a){let e=this.allCards.find(t=>t.code===a);return e?e.name:a}getTotalCards(){return this.selectedCards.reduce((a,e)=>a+e.quantity,0)}static \u0275fac=function(e){return new(e||n)(x(Q),x(z),x(q),x(A),x(fe))};static \u0275cmp=C({type:n,selectors:[["app-card-list"]],inputs:{selectionMode:"selectionMode"},outputs:{cardSelected:"cardSelected"},decls:45,vars:17,consts:[["deckForm","ngForm"],[1,"deck-form",3,"ngSubmit"],["appearance","fill"],["matInput","","name","deckName","required","",3,"ngModelChange","ngModel"],[1,"card-counter"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["class","selected-cards",4,"ngIf"],[1,"view-toggle"],["mat-icon-button","","aria-label","Vista tarjetas",3,"click","color"],["mat-icon-button","","aria-label","Vista lista",3,"click","color"],[1,"mb-3",3,"ngSubmit"],["name","type_code",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["name","faction_code",3,"ngModelChange","ngModel"],["matInput","","name","name","placeholder","Nombre de la carta",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit"],["mat-button","","type","button",3,"click"],["class","card-list",4,"ngIf"],["class","card-list-table",4,"ngIf"],[3,"page","length","pageSize","pageSizeOptions"],[1,"selected-cards"],["class","selected-card",4,"ngFor","ngForOf"],[1,"selected-card"],["mat-mini-button","","color","primary",3,"click"],[1,"quantity"],[3,"value"],[1,"card-list"],["class","card-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"card-item",3,"ngClass"],["mat-card-image","",3,"src","alt"],[1,"card-description"],["mat-raised-button","","color","primary",3,"click"],["class","quantity-badge",4,"ngIf"],[1,"quantity-badge"],[1,"card-list-table"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"card-thumb",3,"src","alt"],["mat-icon-button","","aria-label","Ver descripci\xF3n",3,"click"],["class","card-description",4,"ngIf"]],template:function(e,t){if(e&1){let i=M();o(0,"div")(1,"form",1,0),h("ngSubmit",function(){return u(i),f(t.saveDeck())}),o(3,"mat-form-field",2)(4,"mat-label"),l(5,"Nombre del mazo"),r(),o(6,"input",3),ie("ngModelChange",function(c){return u(i),te(t.deckName,c)||(t.deckName=c),f(c)}),r()(),o(7,"span",4),l(8),r(),o(9,"button",5),l(10," Guardar mazo "),r()(),g(11,fi,4,1,"div",6),o(12,"div",7)(13,"button",8),h("click",function(){return u(i),f(t.setViewMode("cards"))}),o(14,"mat-icon"),l(15,"grid_view"),r()(),o(16,"button",9),h("click",function(){return u(i),f(t.setViewMode("list"))}),o(17,"mat-icon"),l(18,"view_list"),r()()(),o(19,"form",10),h("ngSubmit",function(){return u(i),f(t.applyFilters())}),o(20,"mat-form-field",2)(21,"mat-label"),l(22,"Tipo"),r(),o(23,"mat-select",11),ie("ngModelChange",function(c){return u(i),te(t.filters.type_code,c)||(t.filters.type_code=c),f(c)}),o(24,"mat-option",12),l(25,"Todos"),r(),g(26,_i,2,2,"mat-option",13),r()(),o(27,"mat-form-field",2)(28,"mat-label"),l(29,"Facci\xF3n"),r(),o(30,"mat-select",14),ie("ngModelChange",function(c){return u(i),te(t.filters.faction_code,c)||(t.filters.faction_code=c),f(c)}),o(31,"mat-option",12),l(32,"Todas"),r(),g(33,bi,2,2,"mat-option",13),r()(),o(34,"mat-form-field",2)(35,"mat-label"),l(36,"Nombre"),r(),o(37,"input",15),ie("ngModelChange",function(c){return u(i),te(t.filters.name,c)||(t.filters.name=c),f(c)}),r()(),o(38,"button",16),l(39,"Filtrar"),r(),o(40,"button",17),h("click",function(){return u(i),f(t.clearFilters())}),l(41,"Limpiar"),r()(),g(42,yi,2,1,"div",18)(43,Ti,11,1,"table",19),o(44,"mat-paginator",20),h("page",function(c){return u(i),f(t.onPageChange(c))}),r()()}e&2&&(s(6),ee("ngModel",t.deckName),s(2),b(" ",t.getTotalCards()," cartas "),s(),p("disabled",!t.deckName||t.selectedCards.length===0),s(2),p("ngIf",t.selectedCards.length>0),s(2),p("color",t.viewMode==="cards"?"primary":""),s(3),p("color",t.viewMode==="list"?"primary":""),s(7),ee("ngModel",t.filters.type_code),s(3),p("ngForOf",t.cardTypes),s(4),ee("ngModel",t.filters.faction_code),s(3),p("ngForOf",t.factions),s(4),ee("ngModel",t.filters.name),s(5),p("ngIf",t.viewMode==="cards"),s(),p("ngIf",t.viewMode==="list"),s(),p("length",t.cards.length)("pageSize",t.pageSize)("pageSizeOptions",me(16,gi)))},dependencies:[k,ue,U,O,D,X,G,xe,ve,ye,Y,zt,L,$,be,Ut,He,Ct,xt,ut,ft,_t,yt,vt,bt,wt,Ce,Mt,St,Tt,Se,Te,Me,kt,It,re],styles:[".card-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:flex-start}.card-item[_ngcontent-%COMP%]{width:16rem;min-height:28rem;display:flex;flex-direction:column;justify-content:space-between;border-radius:12px;box-shadow:0 2px 8px #00000014}.card-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:14rem;object-fit:contain;border-radius:8px 8px 0 0}.card-description[_ngcontent-%COMP%]{margin-top:.5rem;font-size:.95em}mat-card.investigator[_ngcontent-%COMP%]{width:20rem}mat-card.investigator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:12rem;object-fit:contain}.selected-cards[_ngcontent-%COMP%]{margin:1rem 0;padding:1rem;background:#f5f5f5;border-radius:8px}.selected-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}.selected-card[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{font-weight:700;min-width:2rem;text-align:center;display:inline-block}.deck-form[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.card-counter[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:500;color:#333;background:#e0e0e0;padding:.4em 1em;border-radius:1em}.quantity-badge[_ngcontent-%COMP%]{margin-left:.5rem;font-weight:700;color:#1976d2;background:#e3f2fd;border-radius:1em;padding:.2em .8em}.view-toggle[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.card-list-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-top:1.5rem;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px #0000000a}.card-list-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .card-list-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #e0e0e0;padding:.7rem .5rem;text-align:left}.card-list-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f0f0f0;font-weight:700}.card-description[_ngcontent-%COMP%]{padding:.5rem 1rem;border-radius:4px;margin-top:.5rem;font-size:.95em}.card-thumb[_ngcontent-%COMP%]{width:32px;height:48px;object-fit:cover;border-radius:4px;margin-right:.5rem;vertical-align:middle;box-shadow:0 1px 4px #0000001a}tr.investigator[_ngcontent-%COMP%]   .card-thumb[_ngcontent-%COMP%]{width:48px;height:32px;object-fit:contain;background:#fff;border:1px solid #eee}mat-expansion-panel[_ngcontent-%COMP%]{background:#fffbe7;border-radius:12px;margin-bottom:1.5rem;box-shadow:0 2px 8px #0000000a}mat-expansion-panel-header[_ngcontent-%COMP%]{align-items:center}mat-panel-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{vertical-align:middle;border-radius:4px;box-shadow:0 1px 4px #00000014}"]})};function Si(n,a){if(n&1&&(o(0,"div")(1,"h2"),l(2),r(),o(3,"p"),l(4),r(),o(5,"p")(6,"strong"),l(7,"Type:"),r(),l(8),r(),o(9,"p")(10,"strong"),l(11,"Faction:"),r(),l(12),r()()),n&2){let e=m();s(2),_(e.card.name),s(2),_(e.card.text),s(4),b(" ",e.card.type_code,""),s(4),b(" ",e.card.faction_code,"")}}function Ii(n,a){n&1&&(o(0,"div")(1,"p"),l(2,"Loading card details..."),r()())}var W=class n{constructor(a,e){this.route=a;this.cardService=e}card;ngOnInit(){let a=this.route.snapshot.paramMap.get("code");a&&this.cardService.getCardByCode(a).subscribe(e=>{this.card=e})}static \u0275fac=function(e){return new(e||n)(x(q),x(Q))};static \u0275cmp=C({type:n,selectors:[["app-card-detail"]],decls:2,vars:2,consts:[[4,"ngIf"]],template:function(e,t){e&1&&g(0,Si,13,4,"div",0)(1,Ii,3,0,"div",0),e&2&&(p("ngIf",t.card),s(),p("ngIf",!t.card))},dependencies:[k,O],encapsulation:2})};var ki=()=>["/cards/deckbuilder"],Pi=n=>["/cards/decks",n];function Di(n,a){n&1&&(o(0,"div"),l(1,"No tienes mazos guardados."),r())}function Ei(n,a){if(n&1&&(o(0,"div",10),y(1,"img",11),r()),n&2){let e=m().$implicit;s(),p("src","https://arkhamdb.com/bundles/cards/"+e.cardsPreview[0].card_code+".png",R)("alt",e.cardsPreview[0].card_code)}}function Oi(n,a){if(n&1){let e=M();o(0,"mat-card",4)(1,"mat-card-title"),l(2),r(),g(3,Ei,2,2,"div",5),o(4,"mat-card-actions",6)(5,"button",7),l(6,"Ver cartas"),r(),o(7,"span",8),l(8,"|"),r(),o(9,"button",9),h("click",function(){let i=u(e).$implicit,d=m();return f(d.deleteDeck(i.id))}),l(10,"Eliminar mazo"),r()()()}if(n&2){let e=a.$implicit;s(2),_(e.name),s(),p("ngIf",e.cardsPreview&&e.cardsPreview.length>0),s(2),p("routerLink",ne(3,Pi,e.id))}}var Z=class n{constructor(a){this.deckService=a}decks=[];ngOnInit(){this.loadDecks()}loadDecks(){let a=localStorage.getItem("token");a&&this.deckService.getUserDecks(a).subscribe({next:e=>{this.decks=e.map(t=>se(P({},t),{cardsPreview:[]})),this.decks.forEach(t=>{this.deckService.getDeckCards(t.id,a).subscribe(i=>{t.cardsPreview=i})})},error:e=>console.error("Error al cargar decks:",e)})}deleteDeck(a){if(window.confirm("\xBFEst\xE1s seguro de que quieres borrar este mazo? Esta acci\xF3n no se puede deshacer.")){let e=localStorage.getItem("token");e&&this.deckService.deleteDeck(a,e).subscribe({next:()=>this.loadDecks(),error:t=>console.error("Error al borrar deck:",t)})}}static \u0275fac=function(e){return new(e||n)(x(z))};static \u0275cmp=C({type:n,selectors:[["app-my-decks"]],decls:7,vars:4,consts:[["mat-raised-button","","color","primary",3,"routerLink"],[4,"ngIf"],[1,"deck-list"],["class","deck-card",4,"ngFor","ngForOf"],[1,"deck-card"],["class","card-preview",4,"ngIf"],[1,"deck-actions"],["mat-button","","color","primary",3,"routerLink"],[1,"divider"],["mat-button","","color","warn",3,"click"],[1,"card-preview"],["width","80","height","auto",3,"src","alt"]],template:function(e,t){e&1&&(o(0,"h2"),l(1,"Mis mazos"),r(),o(2,"button",0),l(3,` Crear mazo
`),r(),g(4,Di,2,0,"div",1),o(5,"div",2),g(6,Oi,11,5,"mat-card",3),r()),e&2&&(s(2),p("routerLink",me(3,ki)),s(2),p("ngIf",t.decks.length===0),s(2),p("ngForOf",t.decks))},dependencies:[k,U,O,D,_e,X,G,xe,Y,L,$],styles:[".deck-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem}.deck-card[_ngcontent-%COMP%]{width:18rem}.deck-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.divider[_ngcontent-%COMP%]{color:#888;font-weight:700;padding:0 8px;-webkit-user-select:none;user-select:none}.card-preview[_ngcontent-%COMP%]{margin:8px 0;display:flex;justify-content:center}"]})};function Ai(n,a){n&1&&(o(0,"div"),l(1,"Cargando..."),r())}function Li(n,a){n&1&&(o(0,"div"),l(1,"Este mazo no tiene cartas."),r())}function zi(n,a){if(n&1&&(o(0,"mat-card"),y(1,"img",6),o(2,"mat-card-title"),l(3),r(),o(4,"mat-card-content"),l(5),y(6,"br"),l(7),y(8,"br"),l(9),r()()),n&2){let e=a.$implicit;B("investigator",e.type_code==="investigator"),s(),p("src","https://arkhamdb.com/bundles/cards/"+e.code+".png",R)("alt",e.name),s(2),_(e.name),s(2),b(" Tipo: ",e.type_code,""),s(2),b(" Facci\xF3n: ",e.faction_code,""),s(2),b(" Cantidad: ",e.quantity," ")}}var ke=class n{constructor(a,e,t,i){this.route=a;this.deckService=e;this.http=t;this.router=i}deckId;deck=null;deckCards=[];loading=!0;ngOnInit(){this.deckId=Number(this.route.snapshot.paramMap.get("id"));let a=typeof window<"u"?localStorage.getItem("token"):"";a&&this.deckId&&(this.deckService.getDeck(this.deckId,a).subscribe({next:e=>{console.log("Deck recibido:",e),this.deck=e}}),this.deckService.getDeckCards(this.deckId,a).subscribe({next:e=>{let t=e.map(i=>i.card_code).join(",");t?this.http.get(`https://arkhamdb.com/api/public/cards/?code=${t}`).subscribe(i=>{this.deckCards=e.map(d=>se(P({},i.find(c=>c.code===d.card_code)),{quantity:d.quantity})),this.loading=!1}):(this.deckCards=[],this.loading=!1)},error:()=>this.loading=!1}))}deleteDeck(){let a=typeof window<"u"?localStorage.getItem("token"):"";a&&this.deckId&&confirm("\xBFSeguro que quieres eliminar este mazo?")&&this.deckService.deleteDeck(this.deckId,a).subscribe({next:()=>this.router.navigate(["/cards/my-decks"]),error:()=>alert("Error al eliminar el mazo")})}editDeck(){this.router.navigate(["/cards/deckbuilder"],{queryParams:{deckId:this.deckId}})}static \u0275fac=function(e){return new(e||n)(x(q),x(z),x(A),x(fe))};static \u0275cmp=C({type:n,selectors:[["app-deck-detail"]],decls:12,vars:4,consts:[["mat-raised-button","","color","accent","routerLink","/cards/my-decks","type","button"],[4,"ngIf"],[1,"card-list"],[3,"investigator",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"],["mat-card-image","",3,"src","alt"]],template:function(e,t){e&1&&(o(0,"button",0),l(1,` Volver a mis mazos
`),r(),o(2,"h2"),l(3),r(),g(4,Ai,2,0,"div",1)(5,Li,2,0,"div",1),o(6,"div",2),g(7,zi,10,8,"mat-card",3),o(8,"button",4),h("click",function(){return t.editDeck()}),l(9,"Modificar mazo"),r(),o(10,"button",5),h("click",function(){return t.deleteDeck()}),l(11,"Eliminar mazo"),r()()),e&2&&(s(3),_(t.deck==null?null:t.deck.name),s(),p("ngIf",t.loading),s(),p("ngIf",!t.loading&&t.deckCards.length===0),s(2),p("ngForOf",t.deckCards))},dependencies:[k,U,O,X,G,ve,ye,Y,L,$,D,_e],styles:[".card-list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;justify-content:flex-start}mat-card[_ngcontent-%COMP%]{width:14rem;margin-bottom:1rem}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:20rem;object-fit:cover;object-position:top;border-radius:.25rem}mat-card.investigator[_ngcontent-%COMP%]{width:20rem}mat-card.investigator[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:12rem;object-fit:contain}"]})};var Ri=[{path:"",component:V},{path:"my-decks",component:Z,canActivate:[Re]},{path:"deckbuilder",component:V,data:{selectionMode:!0},canActivate:[Re]},{path:"decks/:id",component:ke},{path:":code",component:W}],Pe=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=T({type:n});static \u0275inj=w({imports:[D.forChild(Ri),D]})};var Xt=class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=T({type:n});static \u0275inj=w({imports:[V,W,Z,k,Pe]})};export{Xt as CardsModule};
