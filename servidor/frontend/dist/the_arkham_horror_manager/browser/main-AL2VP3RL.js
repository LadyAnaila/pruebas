import{a as L}from"./chunk-J2TY2DQD.js";import{a as je}from"./chunk-7FQVFQFU.js";import{a as Ae,b as Le}from"./chunk-JBEENVIR.js";import{a as ke,h as qe,i as He}from"./chunk-XFXR27FU.js";import"./chunk-BYVFIUG7.js";import{$ as m,Ac as Ee,Bc as Se,C as T,Da as Y,Dc as Fe,Ec as Ie,F as R,Fa as O,Ga as N,Gc as Te,Ha as ee,Ia as U,Ic as Re,Ja as te,K as Z,L as $,La as re,Lc as Pe,Ma as oe,Oa as i,Oc as Oe,Pa as ie,Pc as Ne,Qc as De,U as J,Zb as z,c as Q,da as v,fb as ne,ha as c,hc as ue,ia as P,ic as fe,ja as K,jb as D,jc as M,kc as ge,la as u,lc as d,mb as f,nb as ae,nc as he,oa as l,oc as be,qa as W,qb as me,ra as X,rc as _e,tb as le,tc as ve,ub as se,uc as Me,vb as pe,vc as Ce,wb as de,wc as we,xa as o,xb as A,ya as r,yb as ce,yc as xe,za as p,zc as ye}from"./chunk-LARWJHAD.js";var ze=["*",[["mat-toolbar-row"]]],Be=["*","mat-toolbar-row"],Ge=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275dir=K({type:e,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]})}return e})(),k=(()=>{class e{_elementRef=R(J);_platform=R(ce);_document=R(ne);color;_toolbarRows;constructor(){}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["mat-toolbar"]],contentQueries:function(t,s,b){if(t&1&&te(b,Ge,5),t&2){let h;re(h=oe())&&(s._toolbarRows=h)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(t,s){t&2&&(X(s.color?"mat-"+s.color:""),W("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",s._toolbarRows.length===0))},inputs:{color:"color"},exportAs:["matToolbar"],ngContentSelectors:Be,decls:2,vars:0,template:function(t,s){t&1&&(ee(ze),U(0),U(1,1))},styles:[`.mat-toolbar{background:var(--mat-toolbar-container-background-color, var(--mat-sys-surface));color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font, var(--mat-sys-title-large-font));font-size:var(--mat-toolbar-title-text-size, var(--mat-sys-title-large-size));line-height:var(--mat-toolbar-title-text-line-height, var(--mat-sys-title-large-line-height));font-weight:var(--mat-toolbar-title-text-weight, var(--mat-sys-title-large-weight));letter-spacing:var(--mat-toolbar-title-text-tracking, var(--mat-sys-title-large-tracking));margin:0}@media(forced-colors: active){.mat-toolbar{outline:solid 1px}}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface));--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color, var(--mat-sys-on-surface))}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height, 56px)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height, 64px)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height, 56px)}}
`],encapsulation:2,changeDetection:0})}return e})();var q=(()=>{class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=P({type:e});static \u0275inj=T({imports:[z,z]})}return e})();function Ke(e,a){e&1&&(o(0,"li")(1,"a",6),i(2,"Entrar"),r()())}function We(e,a){e&1&&(o(0,"li")(1,"a",7),i(2,"Registro"),r()())}function Xe(e,a){e&1&&(o(0,"li")(1,"a",8),i(2,"Perfil"),r()())}function Ye(e,a){e&1&&(o(0,"li")(1,"a",9),i(2,"Gestionar eventos"),r()())}function et(e,a){e&1&&(o(0,"li")(1,"a",10),i(2,"Mis eventos"),r()())}function tt(e,a){if(e&1){let n=Y();o(0,"li")(1,"a",11),O("click",function(){Z(n);let s=N();return $(s.logout())}),i(2,"Logout"),r()()}}var C=class e{constructor(a,n){this.userService=a;this.router=n}isLoggedIn=!1;role=null;ngOnInit(){this.isLoggedIn=this.userService.isLoggedIn(),this.role=this.userService.getRole()}logout(){this.userService.logout(),this.isLoggedIn=!1,this.role=null,this.router.navigate(["/login"]),alert("Has cerrado sesi\xF3n con \xE9xito")}static \u0275fac=function(n){return new(n||e)(v(L),v(se))};static \u0275cmp=c({type:e,selectors:[["app-header"]],decls:16,vars:6,consts:[["color","primary"],[1,"app-title"],[1,"spacer"],[1,"nav-links"],["mat-button","","routerLink","/"],[4,"ngIf"],["mat-button","","routerLink","/login"],["mat-button","","routerLink","/register"],["mat-button","","routerLink","/profile"],["mat-button","","routerLink","/events/manage-events"],["mat-button","","routerLink","/events/player-events"],["mat-button","",3,"click"]],template:function(n,t){n&1&&(o(0,"header")(1,"mat-toolbar",0)(2,"h1",1),i(3,"Tabletop Manager "),r(),p(4,"span",2),o(5,"nav")(6,"ul",3)(7,"li")(8,"a",4),i(9,"Inicio"),r()(),u(10,Ke,3,0,"li",5)(11,We,3,0,"li",5)(12,Xe,3,0,"li",5)(13,Ye,3,0,"li",5)(14,et,3,0,"li",5)(15,tt,3,0,"li",5),r()()()()),n&2&&(m(10),l("ngIf",!t.userService.isLoggedIn()),m(),l("ngIf",!t.userService.isLoggedIn()),m(),l("ngIf",t.userService.isLoggedIn()),m(),l("ngIf",t.userService.isLoggedIn()&&t.userService.getRole()==="store"),m(),l("ngIf",t.userService.isLoggedIn()),m(),l("ngIf",t.userService.isLoggedIn()))},dependencies:[f,D,A,pe,q,k,M,fe],styles:["header[_ngcontent-%COMP%]{width:100%}.mat-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.app-title[_ngcontent-%COMP%]{font-size:3rem;font-weight:700;margin:0}.nav-links[_ngcontent-%COMP%]{list-style:none;display:flex;gap:15px;margin:0;padding:0}.nav-links[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline}.spacer[_ngcontent-%COMP%]{flex:1}"]})};var w=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=c({type:e,selectors:[["app-footer"]],decls:4,vars:0,consts:[["color","primary",1,"footer-toolbar"]],template:function(n,t){n&1&&(o(0,"footer")(1,"mat-toolbar",0)(2,"span"),i(3,"\xA9 2025 No\xE8lia L\xF3pez Galiana"),r()()())},dependencies:[f,k],styles:["footer[_ngcontent-%COMP%]{width:100%;bottom:0;left:0;margin-top:auto}.footer-toolbar[_ngcontent-%COMP%]{background-color:#333;color:#fff;justify-content:center;text-align:center;font-size:14px}"]})};var H=class e{static \u0275fac=function(n){return new(n||e)};static \u0275mod=P({type:e});static \u0275inj=T({imports:[f,A,C,w,q,M]})};var j=class e{title="the_arkham_horror_manager";static \u0275fac=function(n){return new(n||e)};static \u0275cmp=c({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[["id","app-root"],[1,"main"]],template:function(n,t){n&1&&(o(0,"div",0),p(1,"app-header"),o(2,"main",1),p(3,"router-outlet"),r(),p(4,"app-footer"),r())},dependencies:[le,f,H,C,w],styles:["html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0}#app-root[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-height:100vh}main[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%], .app-container[_ngcontent-%COMP%]{flex:1 0 auto;width:95%;min-width:0;max-width:100%;margin:1rem auto 0;padding:.75rem;background:#fff}@media (min-width: 767px){main[_ngcontent-%COMP%], .main-container[_ngcontent-%COMP%], .app-container[_ngcontent-%COMP%]{width:80%;max-width:75rem;margin:2rem auto 0;padding:1.5rem}}mat-card-actions[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:.5rem;padding-top:.5rem;margin-top:.5rem}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:.5rem;margin-bottom:.5rem}mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin-right:0}"]})};function it(e,a){e&1&&(o(0,"mat-error"),i(1," El nombre es obligatorio. "),r())}function nt(e,a){e&1&&(o(0,"mat-error"),i(1," El nombre de usuario es obligatorio. "),r())}function at(e,a){e&1&&(o(0,"mat-error"),i(1," Solo letras, n\xFAmeros y guiones bajos. "),r())}function mt(e,a){e&1&&(o(0,"mat-error"),i(1," El correo electr\xF3nico es obligatorio. "),r())}function lt(e,a){e&1&&(o(0,"mat-error"),i(1," Introduce un correo electr\xF3nico v\xE1lido. "),r())}function st(e,a){e&1&&(o(0,"mat-error"),i(1," La contrase\xF1a es obligatoria. "),r())}function pt(e,a){e&1&&(o(0,"mat-error"),i(1," M\xEDnimo 8 caracteres. "),r())}function dt(e,a){e&1&&(o(0,"mat-error"),i(1," Debe contener al menos una may\xFAscula y un n\xFAmero. "),r())}function ct(e,a){e&1&&(o(0,"mat-error"),i(1," Confirma la contrase\xF1a. "),r())}function ut(e,a){e&1&&(o(0,"mat-error"),i(1," Las contrase\xF1as no coinciden. "),r())}function ft(e,a){e&1&&(o(0,"mat-error"),i(1," Selecciona un perfil. "),r())}function gt(e,a){if(e&1&&(o(0,"div",21)(1,"mat-icon",22),i(2,"error"),r(),o(3,"span"),i(4),r()()),e&2){let n=N();m(4),ie(n.errorMessage)}}var V=class e{constructor(a,n){this.fb=a;this.userService=n;this.registerForm=this.fb.group({name:["",d.required],username:["",[d.required,d.pattern("^[a-zA-Z0-9_]+$")]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(8),d.pattern("^(?=.*[A-Z])(?=.*[0-9]).+$")]],confirmPassword:["",d.required],role:["player",d.required]},{validators:this.passwordMatchValidator})}registerForm;errorMessage="";passwordMatchValidator(a){let n=a.get("password")?.value,t=a.get("confirmPassword")?.value;return n===t?null:{mismatch:!0}}onSubmit(){if(this.registerForm.valid){let a=this.registerForm.value,{confirmPassword:n}=a,t=Q(a,["confirmPassword"]);this.userService.register(t).subscribe({next:s=>{this.errorMessage="",alert("Usuario registrado con \xE9xito")},error:s=>{s.status===409?this.errorMessage="El usuario ya existe.":this.errorMessage="Error registrando usuario: "+s.message,alert(this.errorMessage)}})}}static \u0275fac=function(n){return new(n||e)(v(we),v(L))};static \u0275cmp=c({type:e,selectors:[["app-register"]],decls:58,vars:14,consts:[[1,"register-form"],[3,"ngSubmit","formGroup"],[1,"form-field"],["for","name"],["appearance","fill",1,"full-width"],["matInput","","id","name","type","text","formControlName","name","required",""],[4,"ngIf"],["for","username"],["matInput","","id","username","type","text","formControlName","username","required",""],["for","email"],["matInput","","id","email","type","email","formControlName","email","required",""],["for","password"],["matInput","","id","password","type","password","formControlName","password","required",""],["for","confirmPassword"],["matInput","","id","confirmPassword","type","password","formControlName","confirmPassword","required",""],["for","role"],["id","role","formControlName","role","required",""],["value","player"],["value","store"],["class","error-message",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"error-message"],["color","warn"]],template:function(n,t){if(n&1&&(o(0,"div",0)(1,"mat-card")(2,"mat-card-header")(3,"mat-card-title"),i(4,"Registro"),r()(),o(5,"mat-card-content")(6,"p"),i(7,"Todos los campos son obligatorios."),r(),o(8,"form",1),O("ngSubmit",function(){return t.onSubmit()}),o(9,"div",2)(10,"label",3),i(11,"Nombre completo"),r(),o(12,"mat-form-field",4),p(13,"input",5),u(14,it,2,0,"mat-error",6),r()(),o(15,"div",2)(16,"label",7),i(17,"Nombre de usuario"),r(),o(18,"mat-form-field",4),p(19,"input",8),u(20,nt,2,0,"mat-error",6)(21,at,2,0,"mat-error",6),r()(),o(22,"div",2)(23,"label",9),i(24,"Correo electr\xF3nico"),r(),o(25,"mat-form-field",4),p(26,"input",10),u(27,mt,2,0,"mat-error",6)(28,lt,2,0,"mat-error",6),r()(),o(29,"div",2)(30,"label",11),i(31,"Contrase\xF1a"),r(),o(32,"mat-form-field",4),p(33,"input",12),u(34,st,2,0,"mat-error",6)(35,pt,2,0,"mat-error",6)(36,dt,2,0,"mat-error",6),r()(),o(37,"div",2)(38,"label",13),i(39,"Confirmar contrase\xF1a"),r(),o(40,"mat-form-field",4),p(41,"input",14),u(42,ct,2,0,"mat-error",6)(43,ut,2,0,"mat-error",6),r()(),o(44,"div",2)(45,"label",15),i(46,"Qu\xE9 perfil quieres crear?"),r(),o(47,"mat-form-field",4)(48,"mat-select",16)(49,"mat-option",17),i(50,"Quiero participar en eventos"),r(),o(51,"mat-option",18),i(52,"Quiero organizar eventos"),r()(),u(53,ft,2,0,"mat-error",6),r()(),u(54,gt,5,1,"div",19),o(55,"mat-card-actions")(56,"button",20),i(57,"Registrarse"),r()()()()()()),n&2){let s,b,h,y,E,S,_,g,F,G,I;m(8),l("formGroup",t.registerForm),m(6),l("ngIf",((s=t.registerForm.get("name"))==null?null:s.hasError("required"))&&((s=t.registerForm.get("name"))==null?null:s.touched)),m(6),l("ngIf",((b=t.registerForm.get("username"))==null?null:b.hasError("required"))&&((b=t.registerForm.get("username"))==null?null:b.touched)),m(),l("ngIf",((h=t.registerForm.get("username"))==null?null:h.hasError("pattern"))&&((h=t.registerForm.get("username"))==null?null:h.touched)),m(6),l("ngIf",((y=t.registerForm.get("email"))==null?null:y.hasError("required"))&&((y=t.registerForm.get("email"))==null?null:y.touched)),m(),l("ngIf",((E=t.registerForm.get("email"))==null?null:E.hasError("email"))&&((E=t.registerForm.get("email"))==null?null:E.touched)),m(6),l("ngIf",((S=t.registerForm.get("password"))==null?null:S.hasError("required"))&&((S=t.registerForm.get("password"))==null?null:S.touched)),m(),l("ngIf",!((_=t.registerForm.get("password"))!=null&&_.hasError("required"))&&((_=t.registerForm.get("password"))==null?null:_.hasError("minlength"))&&((_=t.registerForm.get("password"))==null?null:_.touched)),m(),l("ngIf",!((g=t.registerForm.get("password"))!=null&&g.hasError("required"))&&!((g=t.registerForm.get("password"))!=null&&g.hasError("minlength"))&&((g=t.registerForm.get("password"))==null?null:g.hasError("pattern"))&&((g=t.registerForm.get("password"))==null?null:g.touched)),m(6),l("ngIf",((F=t.registerForm.get("confirmPassword"))==null?null:F.hasError("required"))&&((F=t.registerForm.get("confirmPassword"))==null?null:F.touched)),m(),l("ngIf",t.registerForm.hasError("mismatch")&&((G=t.registerForm.get("confirmPassword"))==null?null:G.touched)),m(10),l("ngIf",((I=t.registerForm.get("role"))==null?null:I.hasError("required"))&&((I=t.registerForm.get("role"))==null?null:I.touched)),m(),l("ngIf",t.errorMessage),m(2),l("disabled",t.registerForm.invalid)}},dependencies:[xe,_e,ge,he,be,Ce,ve,Me,f,D,Te,ye,Fe,Se,Ie,Ee,M,ue,De,Ne,Pe,Re,Oe,Le,Ae,He,qe,ke],styles:[".register-form[_ngcontent-%COMP%]{max-width:500px;margin:40px auto;width:100%}.full-width[_ngcontent-%COMP%]{width:100%}"]})};var ht=[{path:"register",component:V},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"cards",loadChildren:()=>import("./chunk-PQXT2KOL.js").then(e=>e.CardsModule)},{path:"profile",loadChildren:()=>import("./chunk-WXQYNUQH.js").then(e=>e.UserProfileModule),canActivate:[je]},{path:"login",loadChildren:()=>import("./chunk-WVZLVAU5.js").then(e=>e.LoginModule)},{path:"events",loadChildren:()=>import("./chunk-SJ4S57AO.js").then(e=>e.EventsModule)},{path:"home",loadChildren:()=>import("./chunk-SJND3ZLK.js").then(e=>e.HomeModule)},{path:"**",redirectTo:"login"}],Ve=[],Ue=de(ht);ae(j,{providers:[Ve,Ue,me()]}).catch(e=>console.error(e));
